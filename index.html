<!DOCTYPE html>
        </audio>
        <p><em>Este áudio simula a escuta desacelerada. Em uma versão real, conteria o depoimento de Dona Cida.</em></p>
        <button onclick="calcularIPP()">Finalizar e Calcular IPP</button>
    </div>

    <!-- Etapa 3: Relatório -->
    <div id="report-section" class="section">
        <h2>Relatório de Percepção</h2>
        <div class="report">
            <p>Seu Índice de Percepção Perpétua (IPP): <span id="ipp-score">0</span>/100</p>
            <p>Status: <span id="status">PROCESSANDO</span></p>
            <p>Próxima ação: Regue o Vaso do Meio com um ato de presença real.</p>
        </div>

        <h3>O Vaso do Meio</h3>
        <div class="vaso-container">
            <div class="vaso">
                <div class="planta" style="height: 40px; width: 40px;"></div>
                <div class="vaso-label">Daniel</div>
            </div>
            <div class="vaso">
                <div class="planta" id="planta-meio" style="height: 0; width: 0;"></div>
                <div class="vaso-label">Nós</div>
            </div>
            <div class="vaso">
                <div class="planta" style="height: 40px; width: 40px;"></div>
                <div class="vaso-label">Max</div>
            </div>
        </div>

        <button onclick="location.reload()">Refazer Simulação</button>
    </div>
</div>

<script>
    function nextSection(currentId, nextId) {
        document.getElementById(currentId).classList.remove('active');
        document.getElementById(nextId).classList.add('active');
    }

    function calcularIPP() {
        const sliderValue = parseInt(document.getElementById("presence-slider").value) || 3;
        // Simula IPP com base no slider e se o usuário "ouviu"
        const baseIPP = Math.min(100, Math.max(30, sliderValue * 15 + 20));
        const ipp = baseIPP;

        document.getElementById("ipp-score").textContent = ipp;

        let status = "DESATENÇÃO";
        if (ipp > 80) status = "EM FLUXO";
        else if (ipp > 60) status = "PRESENTE";
        else if (ipp > 40) status = "NEUTRO";

        document.getElementById("status").textContent = status;

        // Cresce a planta do meio proporcionalmente ao IPP
        const size = (ipp * 0.4);
        const plantaMeio = document.getElementById("planta-meio");
        plantaMeio.style.height = size + "px";
        plantaMeio.style.width = size + "px";

        nextSection('slow-listening-section', 'report-section');
    }
</script>

</body>
</html>
