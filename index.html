<!DOCTYPE html>

    <!-- Etapa 3: Relatório -->
    <div id="report-section" class="section">
        <h2>Relatório de Percepção</h2>
        <div class="report">
            <p>Seu Índice de Percepção Perpétua (IPP): <span id="ipp-score">0</span>/100</p>
            <p>Status: <span id="status">PROCESSANDO</span></p>
            <p>Próxima ação: Regue o Vaso do Meio com um ato de presença real.</p>
        </div>

        <h3>O Vaso do Meio</h3>
        <div class="vaso-container">
            <div class="vaso vaso-vitima">
                <div class="planta"></div>
                <div class="vaso-label">Daniel</div>
            </div>
            <div class="vaso vaso-meio">
                <div class="planta" id="planta-meio"></div>
                <div class="vaso-label">Nós</div>
            </div>
            <div class="vaso vaso-reu">
                <div class="planta"></div>
                <div class="vaso-label">Max</div>
            </div>
        </div>

        <button onclick="location.reload()">Refazer Simulação</button>
    </div>
</div>

<script>
    // Função para ir para a próxima seção
    function nextSection(currentId, nextId) {
        document.getElementById(currentId).classList.remove('active');
        document.getElementById(nextId).classList.add('active');
    }

    // Simulação de cálculo do IPP
    function calcularIPP() {
        const sliderValue = document.getElementById("presence-slider").value;
        // Simulação: quanto mais alto o slider, maior o IPP base
        let ipp = parseInt(sliderValue) * 15 + 30; // Base de 30 a 105, limitado a 100
        if (ipp > 100) ipp = 100;

        // Simula tempo de escuta (opcional, se tiver como rastrear)
        // Por enquanto, é baseado no check-in e um fator fixo
        const tempoEscuta = document.getElementById("testimony-audio").currentTime > 0 ? 1 : 0;
        ipp += tempoEscuta * 20;

        document.getElementById("ipp-score").textContent = ipp;
        
        let statusText = "DESATENÇÃO";
        if (ipp > 80) statusText = "EM FLUXO";
        else if (ipp > 60) statusText = "PRESENTE";
        else if (ipp > 40) statusText = "NEUTRO";

        document.getElementById("status").textContent = statusText;

        // Cresce a planta do meio
        document.getElementById("planta-meio").style.height = (ipp * 0.4) + "px";
        document.getElementById("planta-meio").style.width = (ipp * 0.4) + "px";

        nextSection('slow-listening-section', 'report-section');
    }
</script>

</body>
</html>
